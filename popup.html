<!DOCTYPE html>
<html>
<head>
  <title>Nexus Mods ç›´é“¾</title>
  <meta charset="UTF-8">
  <style>
    body { 
      width: 500px; 
      padding: 20px; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #f5f5f5;
      margin: 0;
    }
    .container {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .title {
      font-size: 28px;
      font-weight: 600;
      color: #1a73e8;
      margin: 0;
      line-height: 1.2;
    }
    .online-count {
      padding: 6px 16px;
      background: #e8f0fe;
      border-radius: 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      height: 38px;
    }
    .author, .version {
      font-size: 14px;
      color: #666;
      margin: 5px 0;
    }
    .update-link {
      display: inline-block;
      margin-top: 10px;
      color: #1a73e8;
      text-decoration: none;
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 6px;
      background-color: #e8f0fe;
      transition: all 0.3s ease;
    }
    .update-link:hover {
      background-color: #1a73e8;
      color: white;
    }
    #status {
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 15px;
      font-weight: 500;
    }
    .status-loading {
      background-color: #e3f2fd;
      color: #1976d2;
    }
    .status-success {
      background-color: #e8f5e9;
      color: #2e7d32;
    }
    .status-error {
      background-color: #ffebee;
      color: #d32f2f;
    }

    .link-cell {
      max-width: 200px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .link-cell:hover {
      position: relative;
    }
    .link-cell:hover::after {
      content: attr(data-full-url);
      position: absolute;
      left: 0;
      top: 100%;
      background: #333;
      color: white;
      padding: 8px;
      border-radius: 4px;
      z-index: 1000;
      white-space: normal;
      max-width: 300px;
      word-break: break-all;
    }
    .action-button {
      width: 32px;
      height: 32px;
      padding: 0;
      margin: 0 4px 0 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }
    .action-button img {
      width: 18px;
      height: 18px;
      display: block;
    }
    .copy-button {
      background-color: #e3f2fd;
    }
    .copy-button:hover {
      background-color: #1976d2;
    }
    .copy-button:hover img {
      filter: brightness(0) invert(1);
    }
    .download-button {
      background-color: #e8f5e9;
    }
    .download-button:hover {
      background-color: #2e7d32;
    }
    .download-button:hover img {
      filter: brightness(0) invert(1);
    }
    .copy-all-button {
      background-color: #fff3e0;
      color: #f57c00;
      padding: 0 12px;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 500;
      height: 32px;
      line-height: 32px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin: 0;
      border: none;
      vertical-align: middle;
    }
    .copy-all-button:hover {
      background-color: #f57c00;
      color: white;
    }
    .copy-all-button:hover img {
      filter: brightness(0) invert(1);
    }
    .copy-all-button img {
      width: 16px;
      height: 16px;
    }
    .auth-status {
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 15px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .auth-status.success {
      background-color: #e8f5e9;
      color: #2e7d32;
    }
    .auth-status.error {
      background-color: #ffebee;
      color: #d32f2f;
    }
    .auth-status-icon {
      width: 20px;
      height: 20px;
    }
    
    /* åŠ è½½åŠ¨ç”»æ ·å¼ */
    .loading-spinner {
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* æ¨èå·¥å…·æ ·å¼ */
    .tools-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 10px;
    }
    
    .tool-item {
      display: flex;
      align-items: center;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 8px;
      text-decoration: none;
      color: inherit;
      transition: all 0.3s ease;
    }
    
    .tool-item:hover {
      background: #e8f0fe;
      transform: translateY(-2px);
    }
    
    .tool-icon {
      font-size: 24px;
      margin-right: 12px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .tool-info {
      flex: 1;
    }
    
    .tool-name {
      font-weight: 600;
      color: #1a73e8;
      margin-bottom: 4px;
    }
    
    .tool-desc {
      font-size: 13px;
      color: #666;
    }

    /* æŠ˜å é¢æ¿æ ·å¼ */
    .tools-container {
      margin-top: 20px;
    }

    .tools-container details {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .tools-container summary {
      padding: 12px 20px;
      cursor: pointer;
      user-select: none;
      font-weight: 500;
      color: #1a73e8;
    }

    .tools-container summary:hover {
      background: #f8f9fa;
    }

    .tools-container summary::-webkit-details-marker {
      display: none;
    }

    .tools-container summary::before {
      content: 'â–¶';
      margin-right: 8px;
      font-size: 12px;
      transition: transform 0.2s;
    }

    .tools-container details[open] summary::before {
      transform: rotate(90deg);
    }
    
    /* å¼€å…³æ ·å¼ */
    .settings-container {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .settings-title {
      font-weight: 600;
      color: #1a73e8;
      margin-bottom: 12px;
    }
    
    .settings-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .settings-item:last-child {
      border-bottom: none;
    }
    
    .settings-label {
      font-size: 14px;
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 24px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .3s;
      border-radius: 24px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .3s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: #1a73e8;
    }
    
    input:checked + .slider:before {
      transform: translateX(20px);
    }

    .table-header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }
    
    .table-title {
      font-weight: 600;
      color: #333;
    }
    
    #copyAllBtnContainer {
      margin: 0;
    }

    /* ä¸‹è½½é“¾æ¥åŠ è½½æ•ˆæœ */
    .download-loading {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      background: #f8f9fa;
      border-radius: 4px;
      font-size: 12px;
      color: #666;
    }

    .download-loading .loading-dots {
      display: inline-flex;
      gap: 2px;
    }

    .download-loading .dot {
      width: 4px;
      height: 4px;
      background: #666;
      border-radius: 50%;
      animation: dot-flashing 1s infinite linear alternate;
    }

    .download-loading .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .download-loading .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes dot-flashing {
      0% {
        opacity: 0.2;
        transform: scale(0.8);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .download-status {
      font-size: 12px;
      margin-left: 8px;
    }

    .download-status.success {
      color: #2e7d32;
    }

    .download-status.error {
      color: #d32f2f;
    }

    /* èµåŠ©æ¿å—æ ·å¼ */
    .sponsor-container {
      padding: 15px;
    }
    
    .sponsor-images {
      display: flex;
      justify-content: space-around;
      gap: 10px;
    }
    
    .sponsor-img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .sponsor-img:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* å›¾ç‰‡æ”¾å¤§æ•ˆæœ */
    .fullscreen-image {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    .fullscreen-image img {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">Nç½‘Modçœäº‹åŠ©æ‰‹(å…è´¹)</h1>
      <div class="online-count">
        <span>åœ¨çº¿äººæ•°ï¼š</span>
        <span id="onlineCount">åŠ è½½ä¸­...</span>
      </div>
    </div>
    <p class="author">æ±‚ä¸€é”®ä¸‰è¿ï¼Œè°¢è°¢</p>
    <p class="author">ä½œè€…ï¼šbç«™upæ”¹æ´º_</p>
    <p class="version">ç‰ˆæœ¬ï¼šv1.0.0</p>
    <a href="https://space.bilibili.com/18718286?spm_id_from=333.1007.0.0" class="update-link" target="_blank">è·å–æ›´æ–°</a>
  </div>
    <!-- æ·»åŠ URLç›‘å¬æ§åˆ¶å¼€å…³ -->
    <div class="settings-container">
      <details>
        <summary>URLç›‘å¬è®¾ç½®</summary>
        <div style="padding: 10px 0;">
          <div class="settings-item">
            <div class="settings-label">ç›‘å¬æ ‡å‡†æ¨¡ç»„é¡µé¢</div>
            <label class="switch">
              <input type="checkbox" id="standardUrlSwitch" checked>
              <span class="slider"></span>
            </label>
          </div>
          <div class="settings-item">
            <div class="settings-label">ç›‘å¬æ¸¸æˆåˆ—è¡¨é¡µé¢</div>
            <label class="switch">
              <input type="checkbox" id="gameListUrlSwitch">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </details>
    </div>

    <!-- æ·»åŠ é«˜çº§è®¾ç½® -->
    <div class="settings-container">
      <div class="settings-title">é«˜çº§è®¾ç½®</div>
      <details>
        <summary>å¿«æ·é”®è®¾ç½®</summary>
        <div style="padding: 10px 0;">
          <div class="settings-item">
            <div class="settings-label">å¼€å§‹/æš‚åœè§£æ</div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
              <div style="display: flex; align-items: center; gap: 8px;">
                <kbd style="
                  background: #f8f9fa;
                  border: 1px solid #dee2e6;
                  border-radius: 4px;
                  padding: 4px 8px;
                  font-size: 12px;
                  font-family: monospace;
                ">Ctrl + X</kbd>
                <span style="font-size: 12px; color: #666;">Mac: Command + X</span>
              </div>
              <div style="font-size: 12px; color: #666;">
                ä¿®æ”¹æ–¹æ³•ï¼š<br>
                1. æ‰“å¼€ Chrome æ‰©å±•ç®¡ç†é¡µé¢ (chrome://extensions/shortcuts)<br>
                2. æ‰¾åˆ°"Nexus Mods ç›´é“¾å·¥å…·"<br>
              </div>
            </div>
          </div>
        </div>
      </details>
      <details>
        <summary>æ¸¸æˆåˆ—è¡¨é¡µé¢è¯·æ±‚æ§åˆ¶</summary>
        <div style="padding: 10px 0;">
          <div class="settings-item">
            <div class="settings-label">æœ€å¤§å¹¶å‘è¯·æ±‚æ•°</div>
            <input type="number" id="maxConcurrentRequests" min="1" max="5" value="1" style="width: 60px; text-align: center;">
          </div>
          <div class="settings-item">
            <div class="settings-label">è¯·æ±‚é—´éš”æ—¶é—´(æ¯«ç§’)</div>
            <input type="number" id="requestDelay" min="500" max="5000" step="100" value="2500" style="width: 80px; text-align: center;">
          </div>
          <div style="font-size: 12px; color: #666; margin-top: 10px;">
            æç¤ºï¼šè¾ƒä½çš„å¹¶å‘æ•°å’Œè¾ƒé•¿çš„é—´éš”æ—¶é—´å¯ä»¥å‡å°‘è¢«ç½‘ç«™æ‹¦æˆªçš„é£é™©ï¼Œä½†ä¼šå¢åŠ è·å–é“¾æ¥çš„æ€»æ—¶é—´ã€‚
          </div>
          <div class="settings-item" style="margin-top: 15px; flex-direction: column; align-items: center; border-bottom: none;">
            <button id="clearCacheBtn" style="
              padding: 8px 32px;
              background-color: #dc3545;
              color: white;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              font-size: 14px;
              margin-bottom: 8px;
              display: block;
              margin-left: auto;
              margin-right: auto;
            ">æ¸…é™¤ç›´é“¾ç¼“å­˜</button>
            <div style="font-size: 12px; color: #666; margin-top: 0; text-align: center;">
              æ¸…é™¤åéœ€è¦é‡æ–°è·å–ç›´é“¾ï¼Œå»ºè®®åœ¨é‡åˆ°é—®é¢˜æ—¶ä½¿ç”¨ã€‚
            </div>
          </div>
        </div>
      </details>
    </div>

  <div id="authStatus" class="auth-status">
    <div class="loading-spinner"></div>
    <span>æ­£åœ¨æ£€æŸ¥æˆæƒçŠ¶æ€...</span>
  </div>
  
  <div id="status" class="status-loading">è¯·è®¿é—®æ¨¡ç»„è¯¦æƒ…é¡µ...</div>
  <div id="directLink">

  </div>
  <!-- æ·»åŠ æ¨èå·¥å…·éƒ¨åˆ† -->
  <div class="tools-container">
    <details>
      <summary>æ¨èå·¥å…·</summary>
      <div class="tools-list">
        <a href="https://steampp.net/" class="tool-item" target="_blank">
          <div class="tool-icon">ğŸš€</div>
          <div class="tool-info">
            <div class="tool-name">Steam++</div>
            <div class="tool-desc">Steam å·¥å…·ç®±ï¼Œæä¾›å¤šç§å®ç”¨åŠŸèƒ½</div>
          </div>
        </a>
        <a href="https://pan.quark.cn/s/7317e30a17b9" class="tool-item" target="_blank">
          <div class="tool-icon">â¬‡ï¸</div>
          <div class="tool-info">
            <div class="tool-name">IDMä¸‹è½½å™¨</div>
            <div class="tool-desc">å¼ºå¤§çš„å¤šçº¿ç¨‹ä¸‹è½½å·¥å…·</div>
          </div>
        </a>
        <button id="openAIChatBtn" class="tool-item" style="border: none; background: none; width: 100%; text-align: left; cursor: pointer;">
          <div class="tool-icon">ğŸ¤–</div>
          <div class="tool-info">
            <div class="tool-name">AIåŠ©æ‰‹</div>
            <div class="tool-desc">æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Œéšæ—¶ä¸ºæ‚¨è§£ç­”é—®é¢˜</div>
          </div>
        </button>
      </div>
    </details>
  </div>

  <!-- æ·»åŠ èµåŠ©æ¿å— -->
  <div class="tools-container">
    <details>
      <summary>èµåŠ©æ”¯æŒ</summary>
      <div class="sponsor-container">
        <p style="text-align: center; margin-bottom: 15px; color: #666; font-size: 14px;">è§£æ”¾åŒæ‰‹ï¼Œå‘Šåˆ«ç­‰å¾…ï¼å°å°å¿ƒæ„ï¼Œè®©æ’ä»¶æ›´å¥½ç”¨ã€‚</p>
        <div class="sponsor-images">
          <img src="static/zfb.jpg" alt="æ”¯ä»˜å®" class="sponsor-img" data-action="show-full-image">
          <img src="static/wx.png" alt="å¾®ä¿¡" class="sponsor-img" data-action="show-full-image">
          <img src="static/gm.png" alt="èµèµç " class="sponsor-img" data-action="show-full-image">
        </div>
      </div>
    </details>
  </div>

  <div class="fullscreen-image">
    <img src="" alt="å…¨å±å›¾ç‰‡">
  </div>

  <script src="lib/marked.min.js"></script>
  <script src="popup.js"></script>
</body>
</html> 